#!/usr/bin/env ruby

require_relative '../lib/simulator'
require_relative '../lib/command_parser'

simulator = Simulator.new

ARGF.each_line do |line|
  command = CommandParser.parse(line)
  result = simulator.execute(command)

  if result[:success] && result[:command] == :report
    puts result[:output]
  elsif !result[:success]
    error_message = result[:reason] || command[:hint]
    puts "Error: #{error_message}" if error_message
  end
end